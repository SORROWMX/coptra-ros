<!DOCTYPE html>
<html lang="en">
<head>
    <title>Coptra Drone Kit Tools</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:,">
</head>
<body>
    <div class="header">
        <h1><img src="coptra_icon_128.png" alt="Coptra"> Coptra Drone Kit</h1>
        <div class="subtitle">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥—Ä–æ–Ω–∞</div>
    </div>

    <div class="container">
        <div class="nav-grid">
            <div class="nav-card">
                <a href="topics.html" class="nav-link">
                    <div class="nav-icon">üì°</div>
                    <div class="nav-title">ROS –¢–æ–ø–∏–∫–∏</div>
                    <div class="nav-description">–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç–æ–ø–∏–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>

            <div class="nav-card">
                <a href="" id="wvs" class="nav-link">
                    <div class="nav-icon">üìπ</div>
                    <div class="nav-title">–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫</div>
                    <div class="nav-description">–ü—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å –∫–∞–º–µ—Ä –¥—Ä–æ–Ω–∞</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>

            <div class="nav-card">
                <a href="" id="butterfly" class="nav-link">
                    <div class="nav-icon">üíª</div>
                    <div class="nav-title">–í–µ–± –¢–µ—Ä–º–∏–Ω–∞–ª</div>
                    <div class="nav-description">–£–¥–∞–ª–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>



            <div class="nav-card">
                <a href="aruco_map.html" class="nav-link">
                    <div class="nav-icon">üó∫Ô∏è</div>
                    <div class="nav-title">ArUco –ö–∞—Ä—Ç–∞</div>
                    <div class="nav-description">–ö–∞—Ä—Ç–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>

            <div class="nav-card">
                <a href="../coptra_blocks/" class="nav-link">
                    <div class="nav-icon">üß©</div>
                    <div class="nav-title">–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
                    <div class="nav-description">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ—Ç–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>

            <div class="nav-card">
                <a href="wifi.html" class="nav-link">
                    <div class="nav-icon">üì∂</div>
                    <div class="nav-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi</div>
                    <div class="nav-description">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>

            <div class="nav-card">
                <a href="console.html" class="nav-link">
                    <div class="nav-icon">üìù</div>
                    <div class="nav-title">–°–∏—Å—Ç–µ–º–Ω–∞—è –ö–æ–Ω—Å–æ–ª—å</div>
                    <div class="nav-description">–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</div>
                    <div class="nav-arrow">‚Üí</div>
                </a>
                <div class="loading-spinner"></div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="version-info">
            <div class="version-text" id="version-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="last-updated">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastUpdated">-</span></div>
        </div>
    </div>

    <script type="text/javascript">
        // Set external links
        document.querySelector("#wvs").href = location.protocol + '//' + location.hostname + ':8080';
        document.querySelector("#butterfly").href = location.protocol + '//' + location.hostname + ':57575';

        // Terminal access warning for local connections
        document.querySelector("#butterfly").addEventListener('click', function(e) {
            if (location.hostname == 'localhost' || location.hostname == '127.0.0.1') {
                if (!confirm('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Terminal –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ.\n–ù–∞–∂–º–∏—Ç–µ OK, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫ Butterfly.')) {
                    e.preventDefault();
                }
            }
        });

        // Load version information
        fetch('coptra_version').then(function(response) {
            const versionEl = document.querySelector('#version-text');
            
            if (response.status !== 200) {
                versionEl.innerHTML = '<span class="unavailable-status">‚ö†Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</span>';
                versionEl.classList.add('unavailable');
                return;
            }
            
            response.text().then(function(text) {
                versionEl.innerHTML = '<span class="version-info-text">–í–µ—Ä—Å–∏—è: ' + text.trim() + '</span>';
                versionEl.classList.add('online');
            });
        }).catch(function() {
            const versionEl = document.querySelector('#version-text');
            versionEl.innerHTML = '<span class="offline-status">üî¥ –°–∏—Å—Ç–µ–º–∞ –æ—Ñ–ª–∞–π–Ω</span>';
            versionEl.classList.add('offline');
        });

        // Update last updated time
        function updateLastUpdated() {
            const lastUpdatedElement = document.getElementById('lastUpdated');
            if (lastUpdatedElement) {
                const now = new Date();
                lastUpdatedElement.textContent = now.toLocaleString();
            }
        }

        // Add loading state to navigation cards
        document.querySelectorAll('.nav-card a').forEach(link => {
            link.addEventListener('click', function(e) {
                const card = this.closest('.nav-card');
                card.classList.add('loading');
            });
        });

        // Initialize page
        updateLastUpdated();
    </script>
</body>
</html>